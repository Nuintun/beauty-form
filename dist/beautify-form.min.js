!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("beautify-form",["jquery"],t):e.BeautifyForm=t(e.jQuery)}(this,function(e){"use strict";function t(e){this.node=e}function o(){try{var e=document.activeElement,t=e.contentDocument;return t&&t.activeElement||e}catch(o){}}function i(o){this.destroyed=!1,this.element=e(o),this.type=o.type,this.observer=new t(o),this.type=this.type?this.type.toLowerCase():undefined;var n=i.get(o);if(n)return n;if("checkbox"!==this.type&&"radio"!==this.type)throw new TypeError("The element must be a checkbox or radio.");this.__init()}function n(t,o){var i=[].slice.call(arguments,2),n=o.apply(t,i);if("string"===e.type(n))return n;throw new TypeError("Render function must return a string.")}function r(o,i){var n=this;if(n.type="select",n.opened=!1,n.destroyed=!1,n.element=e(o),n.observer=new t(o),o.multiple||o.size>1)return n;i=e.extend({title:function(e,t){return'<i class="ui-beautify-select-align-middle"></i><span class="ui-beautify-select-title" title="'+t+'">'+t+'</span><i class="ui-beautify-select-icon"></i>'},dropdown:function(e,t){return'<dl class="ui-beautify-select-dropdown-items">'+t+"</dl>"},optgroup:function(e,t){return'<dt class="ui-beautify-select-optgroup" title="'+t+'">'+t+"</dt>"},option:function(e,t){return'<dd role="option" class="ui-beautify-select-option'+(t.group?" ui-beautify-select-optgroup-option":"")+(t.className?" "+t.className:"")+'" '+t.indexAttr+'="'+t.index+'" title="'+t.text+'">'+t.text+"</dd>"},dropdownWidth:null,optionIndexAttr:"data-option",optionSelectedClass:"ui-beautify-select-option-selected",optionDisabledClass:"ui-beautify-select-option-disabled"},i),e.each(["title","dropdown","optgroup","option"],function(t,o){if("function"!==e.type(i[o]))throw new TypeError("Options."+o+" must be a function.")}),n.options=i,n.__init()}function s(e){return function(t,o){if("api"===t)return e.get(this[0]);var i=arguments;return i.length>1&&(o=[].slice.call(i,1)),o=o||[],this.each(function(i,n){var r=e.get(n);r||(r=new e(n,t)),r[t]&&r[t].apply(r,o)})}}var c=Object.defineProperty,d=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=Object.getOwnPropertyDescriptor,u=d?function(e,t){return l(d(e),t)||l(HTMLElement.prototype,t)||l(Element.prototype,t)||l(Node.prototype,t)}:function(e,t){var o=Element.prototype,i=a.call(o,t);if(i||(o=e.constructor.prototype,i=a.call(o,t)),i)return l(o,t)};t.prototype={watch:function(e,t){var o=this.node,i=u(o,e);if(i&&(i.set||i.get)){var n={configurable:!0,enumerable:i.enumerable};i.set&&(n.set=function(o){var n=this,r=n[e];return r!==o&&(i.set.call(n,o),t.call(n,r,o)),o}),i.get&&(n.get=function(){return i.get.call(this)}),c(o,e,n)}return this},unwatch:function(e){return delete this.node[e],this}};var f=e(window),h=e(document),p={};i.get=function(t){return(t=e(t)).data("beautify-choice")},i.prototype={__init:function(){function e(){var e=i.get(this);e&&("radio"===o&&function(e){h.find("input[type=radio][name="+e.name+"]").each(function(t,o){var n=i.get(o);n&&e!==o&&n.refresh()})}(this),e.refresh())}var t=this,o=t.type;if(t.observer.watch("checked",e).watch("disabled",e),"checkbox"===o&&t.observer.watch("indeterminate",e),p[o]=p[o]||0,!p[o]){var n=".beautify-"+o,r="input[type="+o+"]";h.on("focusin"+n,r,e).on("change"+n,r,e).on("focusout"+n,r,e),"checkbox"===o&&h.on("click"+n,r,e)}return t.__beautify()},__beautify:function(){var e=this.type,t=this.element;return t.wrap('<i tabindex="-1" class="ui-beautify-choice ui-beautify-'+e+'"/>'),this.choice=t.parent(),this.choice.attr("role",e),t.data("beautify-choice",this),p[e]++,this.refresh()},refresh:function(){var e=this.type,t=this.choice,i=this.element[0],n=i.indeterminate;return t.toggleClass("ui-beautify-choice-disabled",i.disabled).toggleClass("ui-beautify-choice-focus",o()===i),"checkbox"===e?t.toggleClass("ui-beautify-choice-checked",!n&&i.checked).toggleClass("ui-beautify-choice-indeterminate",n):t.toggleClass("ui-beautify-choice-checked",i.checked),this},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element;if(o.unwrap().removeData("beautify-choice"),e.observer.unwatch("checked").unwatch("disabled"),"checkbox"===t&&(e.observer.unwatch("indeterminate"),o.off("click"+i)),!--p[t]){var i=".beautify-"+t;h.off("focusin"+i).off("change"+i).off("focusout"+i),"checkbox"===t&&h.off("click"+i),delete p[t]}e.destroyed=!0}}};var b,y=document.documentElement.scrollIntoViewIfNeeded,m=0,w=null,v={width:f.width(),height:f.height()};r.get=function(t){return(t=e(t)).data("beautify-select")},r.prototype={__init:function(){function t(){var e=r.get(this);e&&(e.__renderTitlebox(),e.opened&&e.__refreshSelected())}function o(){var e=r.get(this);e&&e.__refreshSelectbox()}var i=this,n=i.type,s=i.options,c=".beautify-"+n;if(w=i,i.observer.watch("disabled",o).watch("selectedIndex",t),!m){h.on("focusin"+c,"select",o).on("change"+c,"select",t).on("focusout"+c,"select",o).on("mousedown"+c,function(t){var o=t.target,i=w.selectbox[0];o!==i&&!e.contains(i,o)&&w.opened&&(w.close(),w.__refreshSelectbox())}).on("keydown"+c,function(e){9!==e.which&&27!==e.which||(w.opened&&w.close(),w.__refreshSelectbox())}),f.on("resize"+c,function(){clearTimeout(b),v.width=f.width(),v.height=f.height(),b=setTimeout(function(){w.opened&&w.__position()},0)})}return i.__beautify(),i.element.on("keypress"+c,function(e){13===e.which&&(e.preventDefault(),i.opened?i.close():i.open())}),i.selectbox.on("mousedown"+c,function(t){t.preventDefault();var o=i.element;if(!o[0].disabled){if(i.opened){var n=t.target,r=i.dropdown[0];r===n||e.contains(r,n)||i.close()}else i.open();setTimeout(function(){o.focus()},0)}}).on("click"+c,"["+s.optionIndexAttr+"]",function(t){t.preventDefault();var o=e(this);o.hasClass(s.optionDisabledClass)||(i.element[0].selectedIndex=o.attr(s.optionIndexAttr),i.close())}),i},__sizeSelectbox:function(){var e=this.element,t=this.selectbox,o=e.outerWidth()-t.outerWidth()+t.width(),i=e.outerHeight()-t.outerHeight()+t.height();return t.width(o),t.height(i),this},__sizeDropdown:function(){var e=this;e.opened||(e.dropdown.css("visibility","hidden"),e.dropdown.appendTo(e.selectbox));var t=e.dropdown,o=e.element.clone(),i={dropdown:{width:t.width(),outerWidth:t.outerWidth()}};o.css({position:"absolute",visibility:"hidden",width:"auto",top:"-100%",left:"-100%"}),o.insertBefore(e.element);var n=o.outerWidth();return o.remove(),n=Math.max(n,e.element.outerWidth())-i.dropdown.outerWidth+i.dropdown.width,n=Math.max(n,e.options.dropdownWidth||0),t.width(n),e.opened||(e.dropdown.detach(),e.dropdown.css("visibility","visible")),e},__position:function(){var e=this;if(e.opened){var t=e.selectbox,o=e.dropdown,i=t[0].getBoundingClientRect(),n={window:{height:f.height()},selectbox:{outerHeight:t.outerHeight()},dropdown:{outerHeight:o.outerHeight()}},r=i.top>f.height()-i.bottom?"top":"bottom";o.removeClass("ui-beautify-select-dropdown-"+("top"===r?"bottom":"top")).addClass("ui-beautify-select-dropdown-"+r),o.css({top:"bottom"===r?n.selectbox.outerHeight:-n.dropdown.outerHeight})}return e},__renderTitlebox:function(){var e="",t=null,o=this.element[0],i=this.options.title,r=o.selectedIndex;return r>=0&&(e=(t=o.options[r]).innerHTML),this.titlebox.html(n(this,i,t,e)),this},__renderDropdown:function(){function t(e,t){var d=o===c,a={group:t,index:o++,text:e.html(),indexAttr:s.optionIndexAttr,className:e[0].disabled?s.optionDisabledClass:d?s.optionSelectedClass:""};i+=n(r,s.option,e,a)}var o=0,i="",r=this,s=r.options,c=r.element[0].selectedIndex,d=r.element.children();return d.each(function(){var o=e(this);switch(this.nodeName.toLowerCase()){case"option":t(o);break;case"optgroup":!function(e){i+=n(r,s.optgroup,e,e.attr("label"))}(o),o.children().each(function(){t(e(this),o)})}}),r.dropdown.html(n(r,s.dropdown,d,i)),r},__refreshSelectbox:function(){var t=this.element[0],i=this.selectbox,n=o();return n=this.opened||n===t||n===i[0]||e.contains(i[0],n),i.toggleClass("ui-beautify-select-disabled",t.disabled).toggleClass("ui-beautify-select-focus",n),this},__refreshSelected:function(){var e=this.options,t=this.dropdown,o=e.optionSelectedClass,i=this.element[0].selectedIndex;t.find("."+o).removeClass(o);var n=t.find("["+e.optionIndexAttr+"="+i+"]");return n.addClass(o),(n=n[0])&&function(e,t){function o(e,o,i,n){return!1===t||i<=e+n&&e<=o+n?Math.min(i,Math.max(o,e)):(o+i)/2}function i(e,t,o,n){return{left:e,top:t,width:o,height:n,right:e+o,bottom:t+n,translate:function(r,s){return i(r+e,s+t,o,n)},relativeFromTo:function(s,c){var d=e,a=t;if(s=s.offsetParent,c=c.offsetParent,s===c)return r;for(;s;s=s.offsetParent)d+=s.offsetLeft+s.clientLeft,a+=s.offsetTop+s.clientTop;for(;c;c=c.offsetParent)d-=c.offsetLeft+c.clientLeft,a-=c.offsetTop+c.clientTop;return i(d,a,o,n)}}}if(!e)throw new Error("Element is required in scrollIntoViewIfNeeded");if(y)return e.scrollIntoViewIfNeeded(t);for(var n,r=i(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);(n=e.parentNode)!==document;){var s=n.offsetLeft+n.clientLeft,c=n.offsetTop+n.clientTop;r=r.relativeFromTo(e,n).translate(-s,-c);var d=o(n.scrollLeft,r.right-n.clientWidth,r.left,n.clientWidth),a=o(n.scrollTop,r.bottom-n.clientHeight,r.top,n.clientHeight);n.scrollLeft=d,n.scrollTop=a,r=r.translate(s-n.scrollLeft,c-n.scrollTop),e=n}}(n),this},__beautify:function(){var t=this.element;t.addClass("ui-beautify-select-hidden");var o=e('<div role="combobox" tabindex="-1" class="ui-beautify-select"/>');return this.titlebox=e('<div class="ui-beautify-select-titlebox"/>'),this.dropdown=e('<div role="listbox" class="ui-beautify-select-dropdown"/>'),o.append(this.titlebox).insertAfter(this.element),this.selectbox=o,t.data("beautify-select",this),m++,this.refresh()},refresh:function(){return this.__sizeSelectbox(),this.__renderTitlebox(),this.__renderDropdown(),this.__sizeDropdown(),this.__refreshSelectbox()},open:function(){return this.opened?this:(this.opened=!0,w!==this&&(w.opened&&w.close(),w.__refreshSelectbox()),w=this,this.selectbox.addClass("ui-beautify-select-opened"),this.dropdown.appendTo(this.selectbox),this.__position(),this.__refreshSelected(),this)},close:function(){var e=this;return e.opened&&(e.opened=!1,e.dropdown.detach(),e.selectbox.removeClass("ui-beautify-select-opened")),e},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element,i=".beautify-"+t;e.element.off("keypress"+i),e.selectbox.off().remove(),e.dropdown.remove(),o.removeData("beautify-select").removeClass("ui-beautify-select-hidden"),e.observer.unwatch("disabled").unwatch("selectedIndex"),--m||(h.off("focusin"+i).off("change"+i).off("focusout"+i).off("mousedown"+i).off("keydown"+i),f.off("resize"+i)),e.destroyed=!0}}},e.fn.checkbox=s(i),e.fn.radiobox=s(i),e.fn.selectbox=s(r);return{CheckBox:i,RadioBox:i,SelectBox:r}});
//# sourceMappingURL=beautify-form.js.map