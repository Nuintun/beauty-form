!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("beautify-form",["jquery"],t):e.BeautifyForm=t(e.jQuery)}(this,function(e){"use strict";function t(e){this.node=e}function o(){try{var e=document.activeElement,t=e.contentDocument;return t&&t.activeElement||e}catch(o){}}function n(e){b.find("input[type=radio][name="+e.name+"]").each(function(t,o){var n=i.get(o);n&&e!==o&&n.refresh()})}function i(o){var n=this;n.destroyed=!1,n.element=e(o),n.type=o.type,n.observer=new t(o),n.type=n.type?n.type.toLowerCase():undefined;var r=i.get(o);if(r)return r;if("checkbox"!==n.type&&"radio"!==n.type)throw new TypeError("The element must be a checkbox or radio.");n.__init()}function r(e,t){function o(e,o,n,i){return!1===t||n<=e+i&&e<=o+i?Math.min(n,Math.max(o,e)):(o+n)/2}function n(e,t,o,i){return{left:e,top:t,width:o,height:i,right:e+o,bottom:t+i,translate:function(r,s){return n(r+e,s+t,o,i)},relativeFromTo:function(s,c){var a=e,d=t;if(s=s.offsetParent,c=c.offsetParent,s===c)return r;for(;s;s=s.offsetParent)a+=s.offsetLeft+s.clientLeft,d+=s.offsetTop+s.clientTop;for(;c;c=c.offsetParent)a-=c.offsetLeft+c.clientLeft,d-=c.offsetTop+c.clientTop;return n(a,d,o,i)}}}if(!e)throw new Error("Element is required in scrollIntoViewIfNeeded");if(v)return e.scrollIntoViewIfNeeded(t);for(var i,r=n(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);(i=e.parentNode)!==document;){var s=i.offsetLeft+i.clientLeft,c=i.offsetTop+i.clientTop;r=r.relativeFromTo(e,i).translate(-s,-c);var a=o(i.scrollLeft,r.right-i.clientWidth,r.left,i.clientWidth),d=o(i.scrollTop,r.bottom-i.clientHeight,r.top,i.clientHeight);i.scrollLeft=a,i.scrollTop=d,r=r.translate(s-i.scrollLeft,c-i.scrollTop),e=i}}function s(t,o){var n=[].slice.call(arguments,2),i=o.apply(t,n);if("string"===e.type(i))return i;throw new TypeError("Render function must return a string.")}function c(o,n){var i=this;if(i.type="select",i.opened=!1,i.destroyed=!1,i.element=e(o),i.observer=new t(o),o.multiple||o.size>1)return i;n=e.extend({title:function(e,t){return'<i class="ui-beautify-select-align-middle"></i><span class="ui-beautify-select-title" title="'+t+'">'+t+'</span><i class="ui-beautify-select-icon"></i>'},dropdown:function(e,t){return'<dl class="ui-beautify-select-dropdown-items">'+t+"</dl>"},optgroup:function(e,t){return'<dt class="ui-beautify-select-optgroup" title="'+t+'">'+t+"</dt>"},option:function(e,t){return'<dd role="option" class="ui-beautify-select-option'+(t.group?" ui-beautify-select-optgroup-option":"")+(t.className?" "+t.className:"")+'" '+t.indexAttr+'="'+t.index+'" title="'+t.text+'">'+t.text+"</dd>"},dropdownWidth:null,optionIndexAttr:"data-option",optionSelectedClass:"ui-beautify-select-option-selected",optionDisabledClass:"ui-beautify-select-option-disabled"},n),e.each(["title","dropdown","optgroup","option"],function(t,o){if("function"!==e.type(n[o]))throw new TypeError("Options."+o+" must be a function.")}),i.options=n,i.__init()}function a(e){return function(t,o){if("api"===t)return e.get(this[0]);var n=arguments;return n.length>1&&(o=[].slice.call(n,1)),o=o||[],this.each(function(n,i){var r=e.get(i);r||(r=new e(i,t)),r[t]&&r[t].apply(r,o)})}}e=e&&e.hasOwnProperty("default")?e["default"]:e;var d=Object.defineProperty,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,f=Object.getOwnPropertyDescriptor,p=l?function(e,t){return f(l(e),t)||f(HTMLElement.prototype,t)||f(Element.prototype,t)||f(Node.prototype,t)}:function(e,t){var o=Element.prototype;if(u.call(o,t)||(o=e.constructor.prototype),u.call(o,t))return f(o,t)};t.prototype={watch:function(e,t){var o=this.node,n=p(o,e);if(n&&(n.set||n.get)){var i={configurable:!0,enumerable:n.enumerable};n.set&&(i.set=function(o){var i=this,r=i[e];return r!==o&&(n.set.call(i,o),t.call(i,r,o)),o}),n.get&&(i.get=function(){return n.get.call(this)}),d(o,e,i)}return this},unwatch:function(e){return delete this.node[e],this}};var h=e(window),b=e(document),y={};i.get=function(t){return(t=e(t)).data("beautify-choice")},i.prototype={__init:function(){function e(){var e=i.get(this);e&&("radio"===o&&n(this),e.refresh())}var t=this,o=t.type;if(t.observer.watch("checked",e),t.observer.watch("disabled",e),"checkbox"===o&&t.observer.watch("indeterminate",e),y[o]=y[o]||0,!y[o]){var r=".beautify-"+o,s="input[type="+o+"]";b.on("focusin"+r,s,e),b.on("change"+r,s,e),b.on("focusout"+r,s,e),"checkbox"===o&&b.on("click"+r,s,e)}return t.__beautify()},__beautify:function(){var e=this,t=e.type,o=e.element;return o.wrap('<i tabindex="-1" class="ui-beautify-choice ui-beautify-'+t+'"/>'),e.choice=o.parent(),e.choice.attr("role",t),o.data("beautify-choice",e),y[t]++,e.refresh()},refresh:function(){var e=this,t=e.type,n=e.choice,i=e.element[0],r=i.indeterminate;return n.toggleClass("ui-beautify-choice-disabled",i.disabled).toggleClass("ui-beautify-choice-focus",o()===i),"checkbox"===t?n.toggleClass("ui-beautify-choice-checked",!r&&i.checked).toggleClass("ui-beautify-choice-indeterminate",r):n.toggleClass("ui-beautify-choice-checked",i.checked),e},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element;if(o.unwrap(),o.removeData("beautify-choice"),e.observer.unwatch("checked"),e.observer.unwatch("disabled"),"checkbox"===t&&(e.observer.unwatch("indeterminate"),o.off("click"+n)),!--y[t]){var n=".beautify-"+t;b.off("focusin"+n),b.off("change"+n),b.off("focusout"+n),"checkbox"===t&&b.off("click"+n),delete y[t]}e.destroyed=!0}}};var m,v=document.documentElement.scrollIntoViewIfNeeded,w=0,g=null,x={width:h.width(),height:h.height()};return c.get=function(t){return(t=e(t)).data("beautify-select")},c.prototype={__init:function(){function t(){var e=c.get(this);e&&(e.__renderTitlebox(),e.opened&&e.__refreshSelected())}function o(){var e=c.get(this);e&&e.__refreshSelectbox()}var n=this,i=n.type,r=n.options,s=".beautify-"+i;if(g=n,n.observer.watch("disabled",o),n.observer.watch("selectedIndex",t),!w){b.on("focusin"+s,"select",o),b.on("change"+s,"select",t),b.on("focusout"+s,"select",o),b.on("mousedown"+s,function(t){var o=t.target,n=g.selectbox[0];o!==n&&!e.contains(n,o)&&g.opened&&(g.close(),g.__refreshSelectbox())}),b.on("keydown"+s,function(e){9!==e.which&&27!==e.which||(g.opened&&g.close(),g.__refreshSelectbox())}),h.on("resize"+s,function(){clearTimeout(m),x.width=h.width(),x.height=h.height(),m=setTimeout(function(){g.opened&&g.__position()},0)})}return n.__beautify(),n.element.on("keypress"+s,function(e){13===e.which&&(e.preventDefault(),n.opened?n.close():n.open())}),n.selectbox.on("mousedown"+s,function(t){t.preventDefault();var o=n.element;if(!o[0].disabled){if(n.opened){var i=t.target,r=n.dropdown[0];r===i||e.contains(r,i)||n.close()}else n.open();setTimeout(function(){o.focus()},0)}}),n.selectbox.on("click"+s,"["+r.optionIndexAttr+"]",function(t){t.preventDefault();var o=e(this);o.hasClass(r.optionDisabledClass)||(n.element[0].selectedIndex=o.attr(r.optionIndexAttr),n.close())}),n},__sizeSelectbox:function(){var e=this,t=e.element,o=e.selectbox,n=t.outerWidth()-o.outerWidth()+o.width(),i=t.outerHeight()-o.outerHeight()+o.height();return o.width(n),o.height(i),e},__sizeDropdown:function(){var e=this;e.opened||(e.dropdown.css("visibility","hidden"),e.dropdown.appendTo(e.selectbox));var t=e.dropdown,o=e.element.clone(),n={dropdown:{width:t.width(),outerWidth:t.outerWidth()}};o.css({position:"absolute",visibility:"hidden",width:"auto",top:"-100%",left:"-100%"}),o.insertBefore(e.element);var i=o.outerWidth();return o.remove(),i=Math.max(i,e.element.outerWidth())-n.dropdown.outerWidth+n.dropdown.width,i=Math.max(i,e.options.dropdownWidth||0),t.width(i),e.opened||(e.dropdown.detach(),e.dropdown.css("visibility","visible")),e},__position:function(){var e=this;if(e.opened){var t=e.selectbox,o=e.dropdown,n=t[0].getBoundingClientRect(),i={window:{height:h.height()},selectbox:{outerHeight:t.outerHeight()},dropdown:{outerHeight:o.outerHeight()}},r=n.top>h.height()-n.bottom?"top":"bottom";o.removeClass("ui-beautify-select-dropdown-"+("top"===r?"bottom":"top")).addClass("ui-beautify-select-dropdown-"+r),o.css({top:"bottom"===r?i.selectbox.outerHeight:-i.dropdown.outerHeight})}return e},__renderTitlebox:function(){var e="",t=this,o=null,n=t.element[0],i=t.options.title,r=n.selectedIndex;return r>=0&&(e=(o=n.options[r]).innerHTML),t.titlebox.html(s(t,i,o,e)),t},__renderDropdown:function(){function t(e,t){var o=n===a,d={group:t,index:n++,text:e.html(),indexAttr:c.optionIndexAttr,className:e[0].disabled?c.optionDisabledClass:o?c.optionSelectedClass:""};i+=s(r,c.option,e,d)}function o(e){i+=s(r,c.optgroup,e,e.attr("label"))}var n=0,i="",r=this,c=r.options,a=r.element[0].selectedIndex,d=r.element.children();return d.each(function(){var n=e(this);switch(this.nodeName.toLowerCase()){case"option":t(n);break;case"optgroup":o(n),n.children().each(function(){t(e(this),n)})}}),r.dropdown.html(s(r,c.dropdown,d,i)),r},__refreshSelectbox:function(){var t=this,n=t.element[0],i=t.selectbox,r=o();return r=t.opened||r===n||r===i[0]||e.contains(i[0],r),i.toggleClass("ui-beautify-select-disabled",n.disabled).toggleClass("ui-beautify-select-focus",r),t},__refreshSelected:function(){var e=this,t=e.options,o=e.dropdown,n=t.optionSelectedClass,i=e.element[0].selectedIndex;o.find("."+n).removeClass(n);var s=o.find("["+t.optionIndexAttr+"="+i+"]");return s.addClass(n),(s=s[0])&&r(s),e},__beautify:function(){var t=this,o=t.element;o.addClass("ui-beautify-select-hidden");var n=e('<div role="combobox" tabindex="-1" class="ui-beautify-select"/>');return t.titlebox=e('<div class="ui-beautify-select-titlebox"/>'),t.dropdown=e('<div role="listbox" class="ui-beautify-select-dropdown"/>'),n.append(t.titlebox).insertAfter(t.element),t.selectbox=n,o.data("beautify-select",t),w++,t.refresh()},refresh:function(){var e=this;return e.__sizeSelectbox(),e.__renderTitlebox(),e.__renderDropdown(),e.__sizeDropdown(),e.__refreshSelectbox()},open:function(){var e=this;return e.opened?e:(e.opened=!0,g!==e&&(g.opened&&g.close(),g.__refreshSelectbox()),g=e,e.selectbox.addClass("ui-beautify-select-opened"),e.dropdown.appendTo(e.selectbox),e.__position(),e.__refreshSelected(),e)},close:function(){var e=this;return e.opened&&(e.opened=!1,e.dropdown.detach(),e.selectbox.removeClass("ui-beautify-select-opened")),e},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element,n=".beautify-"+t;e.selectbox.off(),e.element.off("keypress"+n),e.selectbox.remove(),e.dropdown.remove(),o.removeData("beautify-select"),o.removeClass("ui-beautify-select-hidden"),e.observer.unwatch("disabled"),e.observer.unwatch("selectedIndex"),--w||(b.off("focusin"+n),b.off("change"+n),b.off("focusout"+n),b.off("mousedown"+n),b.off("keydown"+n),h.off("resize"+n)),e.destroyed=!0}}},e.fn.checkbox=a(i),e.fn.radiobox=a(i),e.fn.selectbox=a(c),{CheckBox:i,RadioBox:i,SelectBox:c}});
//# sourceMappingURL=beautify-form.js.map