!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("beauty-form",["jquery"],t):e.beautyForm=t(e.jQuery)}(this,function(e){"use strict";function t(){try{var e=document.activeElement,t=e.contentDocument;return t&&t.activeElement||e}catch(o){}}function o(e){d.find("input[type=radio][name="+e.name+"]").each(function(){var t=n.get(this);t&&e!==this&&t.refresh()})}function n(t){var o=this;o.destroyed=!1,o.element=e(t),o.type=o.element.attr("type"),o.type=o.type?o.type.toLowerCase():undefined;var i=n.get(t);if(i)return i;if("checkbox"!==o.type&&"radio"!==o.type)throw new TypeError("The element must be a checkbox or radio.");o.__init()}function i(e,t){function o(e,o,n,i){return!1===t||n<=e+i&&e<=o+i?Math.min(n,Math.max(o,e)):(o+n)/2}function n(e,t,o,i){return{left:e,top:t,width:o,height:i,right:e+o,bottom:t+i,translate:function(r,s){return n(r+e,s+t,o,i)},relativeFromTo:function(s,c){var l=e,d=t;if(s=s.offsetParent,c=c.offsetParent,s===c)return r;for(;s;s=s.offsetParent)l+=s.offsetLeft+s.clientLeft,d+=s.offsetTop+s.clientTop;for(;c;c=c.offsetParent)l-=c.offsetLeft+c.clientLeft,d-=c.offsetTop+c.clientTop;return n(l,d,o,i)}}}if(!e)throw new Error("Element is required in scrollIntoViewIfNeeded");if(f)return e.scrollIntoViewIfNeeded(t);for(var i,r=n(e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight);(i=e.parentNode)!==document;){var s=i.offsetLeft+i.clientLeft,c=i.offsetTop+i.clientTop;r=r.relativeFromTo(e,i).translate(-s,-c);var l=o(i.scrollLeft,r.right-i.clientWidth,r.left,i.clientWidth),d=o(i.scrollTop,r.bottom-i.clientHeight,r.top,i.clientHeight);i.scrollLeft=l,i.scrollTop=d,r=r.translate(s-i.scrollLeft,c-i.scrollTop),e=i}}function r(t,o){var n=[].slice.call(arguments,2),i=o.apply(t,n);if("string"===e.type(i))return i;throw new TypeError("Render function must return a string.")}function s(t,o){var n=this;if(n.type="select",n.opened=!1,n.destroyed=!1,n.element=e(t),n.element.attr("multiple")!==undefined||n.element.attr("size")>1)return n;o=e.extend({title:function(e,t){return'<i class="ui-beauty-select-align-middle"></i><span class="ui-beauty-select-title" title="'+t+'">'+t+'</span><i class="ui-beauty-select-icon"></i>'},dropdown:function(e,t){return'<dl class="ui-beauty-select-dropdown-items">'+t+"</dl>"},optgroup:function(e,t){return'<dt class="ui-beauty-select-optgroup" title="'+t+'">'+t+"</dt>"},option:function(e,t){return'<dd role="option" class="ui-beauty-select-option'+(t.group?" ui-beauty-select-optgroup-option":"")+(t.className?" "+t.className:"")+'" '+t.indexAttr+'="'+t.index+'" title="'+t.text+'">'+t.text+"</dd>"},dropdownWidth:null,optionIndexAttr:"data-option",optionSelectedClass:"ui-beauty-select-option-selected",optionDisabledClass:"ui-beauty-select-option-disabled"},o),e.each(["title","dropdown","optgroup","option"],function(t,n){if("function"!==e.type(o[n]))throw new TypeError("Options."+n+" must be a function.")}),n.options=o,n.__init()}function c(e){return function(t,o){var n=arguments;return n.length>1&&(o=[].slice.call(n,1)),this.each(function(n,i){var r=e.get(i);r?r[t]&&r[t].apply(r,o):r=new e(i,t)})}}var l=(e=e&&e.hasOwnProperty("default")?e["default"]:e)(window),d=e(document),u={};n.get=function(t){return(t=e(t)).data("beauty-choice")},n.prototype={__init:function(){var e=this.type;if(!u[e]){u[e]=0;var t=".beauty-"+e,i="input[type="+e+"]";d.on("change"+t,i,function(){var t=n.get(this);t&&("radio"===e&&o(this),t.refresh())}),d.on("focusin"+t,i,function(){var e=n.get(this);e&&e.refresh()}),d.on("focusout"+t,i,function(){var e=n.get(this);e&&e.refresh()})}return this.__beauty()},__beauty:function(){var e=this,t=e.element;if(!n.get(t)){var o=e.type;t.wrap('<i tabindex="-1" class="ui-beauty-choice ui-beauty-'+o+'"/>'),u[o]++,e.choice=t.parent(),e.choice.attr("role",e.choice.type),t.data("beauty-choice",e)}return e.refresh()},focus:function(){return this.element.trigger("focus"),this},blur:function(){return this.element.trigger("blur"),this},check:function(){var e=this,t=e.type,n=e.element[0];return n.checked=!0,"radio"===t&&o(n),e.refresh()},uncheck:function(){var e=this,t=e.type,n=e.element[0];return n.checked=!1,"radio"===t&&o(n),e.refresh()},enable:function(){return this.element[0].disabled=!1,this.refresh()},disable:function(){return this.element[0].disabled=!0,this.refresh()},indeterminate:function(e){var t=this;return"radio"===t.type?t:(e=Boolean(e),t.element[0].indeterminate=e,t.choice.toggleClass("ui-beauty-choice-indeterminate",e),t)},refresh:function(){var e=this,o=e.element[0];return e.choice.toggleClass("ui-beauty-choice-checked",o.checked).toggleClass("ui-beauty-choice-disabled",o.disabled).toggleClass("ui-beauty-choice-focus",t()===o),e.indeterminate(),e},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element;if(o.unwrap(),o.removeData("beauty-choice"),u[t]--,!u[t]){var n=".beauty-"+t;d.off("change"+n),d.off("focusin"+n),d.off("focusout"+n)}e.destroyed=!0}}};var a,f=document.documentElement.scrollIntoViewIfNeeded,h=0,p=null,b={width:l.width(),height:l.height()};return s.get=function(t){return(t=e(t)).data("beauty-select")},s.prototype={__init:function(){var t=this,o=t.type,n=t.options,i=".beauty-"+o;if(p=t,!h){d.on("change"+i,"select",function(){var e=s.get(this);e&&(e.__renderTitlebox(),e.opened&&e.__refreshSelected())}),d.on("focusin"+i+" focusout"+i,"select",function(){var e=s.get(this);e&&e.__refreshSelectbox()}),d.on("mousedown"+i,function(t){var o=t.target,n=p.selectbox[0];o!==n&&!e.contains(n,o)&&p.opened&&(p.close(),p.__refreshSelectbox())}),d.on("keydown"+i,function(e){9!==e.which&&27!==e.which||(p.opened&&p.close(),p.__refreshSelectbox())}),l.on("resize"+i,function(){clearTimeout(a),b.width=l.width(),b.height=l.height(),a=setTimeout(function(){p.opened&&p.__position()},0)})}return t.__beauty(),t.element.on("keypress"+i,function(e){13===e.which&&(e.preventDefault(),t.opened?t.close():t.open())}),t.selectbox.on("mousedown"+i,function(o){if(!t.element[0].disabled)if(o.preventDefault(),t.focus(),t.opened){var n=o.target,i=t.dropdown[0];i===n||e.contains(i,n)||t.close()}else t.open()}),t.selectbox.on("click"+i,"["+n.optionIndexAttr+"]",function(o){o.preventDefault();var i=e(this);i.hasClass(n.optionDisabledClass)||(t.select(i.attr(n.optionIndexAttr)),t.close())}),t},__sizeSelectbox:function(){var e=this,t=e.element,o=e.selectbox,n=t.outerWidth()-o.outerWidth()+o.width(),i=t.outerHeight()-o.outerHeight()+o.height();return o.width(n),o.height(i),e},__sizeDropdown:function(){var e=this;e.opened||(e.dropdown.css("visibility","hidden"),e.dropdown.appendTo(e.selectbox));var t=e.dropdown,o=e.element.clone(),n={dropdown:{width:t.width(),outerWidth:t.outerWidth()}};o.css({position:"absolute",visibility:"hidden",width:"auto",top:"-100%",left:"-100%"}),o.insertBefore(e.element);var i=o.outerWidth();return o.remove(),i=Math.max(i,e.element.outerWidth())-n.dropdown.outerWidth+n.dropdown.width,i=Math.max(i,e.options.dropdownWidth||0),t.width(i),e.opened||(e.dropdown.detach(),e.dropdown.css("visibility","visible")),e},__position:function(){var e=this;if(e.opened){var t=e.selectbox,o=e.dropdown,n=t[0].getBoundingClientRect(),i={window:{height:l.height()},selectbox:{outerHeight:t.outerHeight()},dropdown:{outerHeight:o.outerHeight()}},r=n.top>l.height()-n.bottom?"top":"bottom";o.removeClass("ui-beauty-select-dropdown-"+("top"===r?"bottom":"top")).addClass("ui-beauty-select-dropdown-"+r),o.css({top:"bottom"===r?i.selectbox.outerHeight:-i.dropdown.outerHeight})}return e},__renderTitlebox:function(){var t=this,o=t.element[0],n=e(o.options[o.selectedIndex]);return t.titlebox.html(r(t,t.options.title,n,n.html())),t},__renderDropdown:function(){function t(e,t){var o=n===l,d={group:t,index:n++,text:e.html(),indexAttr:c.optionIndexAttr,className:e[0].disabled?c.optionDisabledClass:o?c.optionSelectedClass:""};i+=r(s,c.option,e,d)}function o(e){i+=r(s,c.optgroup,e,e.attr("label"))}var n=0,i="",s=this,c=s.options,l=s.element[0].selectedIndex,d=s.element.children();return d.each(function(){var n=e(this);switch(this.nodeName.toLowerCase()){case"option":t(n);break;case"optgroup":o(n),n.children().each(function(){t(e(this),n)})}}),s.dropdown.html(r(s,c.dropdown,d,i)),s},__refreshSelectbox:function(){var o=this,n=o.element[0],i=o.selectbox,r=t();return r=o.opened||r===n||r===i[0]||e.contains(i[0],r),i.toggleClass("ui-beauty-select-disabled",n.disabled).toggleClass("ui-beauty-select-focus",r),o},__refreshSelected:function(){var e=this,t=e.options,o=e.dropdown,n=t.optionSelectedClass,r=e.element[0].selectedIndex;o.find("."+n).removeClass(n);var s=o.find("["+t.optionIndexAttr+"="+r+"]");return s.addClass(n),i(s[0]),e},__beauty:function(){var t=this,o=t.element;if(!s.get(o)){o.addClass("ui-beauty-select-hidden");var n=e('<div role="combobox" tabindex="-1" class="ui-beauty-select"/>');t.titlebox=e('<div class="ui-beauty-select-titlebox"/>'),t.dropdown=e('<div role="listbox" class="ui-beauty-select-dropdown"/>'),n.append(t.titlebox).insertAfter(t.element),t.selectbox=n,h++,o.data("beauty-select",t)}return t.refresh()},focus:function(){return this.element.trigger("focus"),this},blur:function(){return this.element.trigger("blur"),this},enable:function(){return this.element[0].disabled=!1,this.__refreshSelectbox()},disable:function(){return this.element[0].disabled=!0,this.__refreshSelectbox()},refresh:function(){var e=this;return e.__sizeSelectbox(),e.__renderTitlebox(),e.__renderDropdown(),e.__sizeDropdown(),e.__refreshSelectbox()},select:function(e){var t=this,o=t.element[0],n=o.selectedIndex;return e>>>=0,o.selectedIndex=e,n!==e&&t.element.trigger("change"),this.__renderTitlebox()},open:function(){var e=this;return e.opened?e:(e.opened=!0,p!==e&&(p.opened&&p.close(),p.__refreshSelectbox()),p=e,e.selectbox.addClass("ui-beauty-select-opened"),e.dropdown.appendTo(e.selectbox),e.__position(),e.__refreshSelected(),e)},close:function(){var e=this;return e.opened&&(e.opened=!1,e.dropdown.detach(),e.selectbox.removeClass("ui-beauty-select-opened")),e},destroy:function(){var e=this;if(!e.destroyed){var t=e.type,o=e.element,n=".beauty-"+t;e.selectbox.off(),e.element.off("keypress"+n),e.selectbox.remove(),e.dropdown.remove(),o.removeData("beauty-select"),o.removeClass("ui-beauty-select-hidden"),--h||(d.off("change"+n),d.off("focusin"+n),d.off("focusout"+n),d.off("mousedown"+n),d.off("keydown"+n),l.off("resize"+n)),e.destroyed=!0}}},e.fn.checkbox=c(n),e.fn.radiobox=c(n),e.fn.selectbox=c(s),{Checkbox:n,RadioBox:n,SelectBox:s}});
//# sourceMappingURL=beauty-form.js.map